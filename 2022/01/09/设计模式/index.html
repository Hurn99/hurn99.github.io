<!DOCTYPE html><html lang="zh"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=0.5"><link rel="stylesheet" href="/css/post.css"><link rel="icon" href="/img/favicon.png"><title>设计模式</title><meta name="generator" content="Hexo 5.4.0"><link rel="stylesheet" href="/css/prism.css" type="text/css"></head><body>　　<div class="inner"><h2>设计模式</h2><h2 id="1-观察者模式"><a href="#1-观察者模式" class="headerlink" title="1. 观察者模式"></a>1. 观察者模式</h2><ul>
<li>定义对象间的一种一对多的依赖关系，当一个对象的状态发生改变时，<code>所有依赖的对象都得到通知并自动更新</code>。</li>
<li>将功能分割后，不用再维护各组件间的统一性，使用此模式动态更新。</li>
<li>适用于一个对象改变后需要通知其他对象的场景。</li>
<li>案例，模仿热水器的工作</li>
</ul>
<pre class=" language-python"><code class="language-python"><span class="token keyword">from</span> abc <span class="token keyword">import</span> abstractmethod<span class="token punctuation">,</span> ABCMeta


<span class="token comment" spellcheck="true"># 监听模式 ，热水器是被监听 ， 热水模式为监听 ,温度为监听属性</span>

<span class="token keyword">class</span> <span class="token class-name">WaterHeater</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>__observers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        self<span class="token punctuation">.</span>__temperature <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"【初始化】热水器开始工作啦~~~"</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">set_temperature</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> t<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token number">0</span> <span class="token operator">&lt;</span> t <span class="token operator">&lt;=</span> <span class="token number">200</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"【设置温度】将温度设置为："</span><span class="token punctuation">,</span> t<span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>__temperature <span class="token operator">=</span> t
            self<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">get_temperature</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>__temperature

    <span class="token keyword">def</span> <span class="token function">add_observers</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> observer<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>__observers<span class="token punctuation">.</span>append<span class="token punctuation">(</span>observer<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">update</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> len<span class="token punctuation">(</span>self<span class="token punctuation">.</span>__observers<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">:</span>
            <span class="token keyword">for</span> o <span class="token keyword">in</span> self<span class="token punctuation">.</span>__observers<span class="token punctuation">:</span>
                <span class="token comment" spellcheck="true"># 把自己传递过去</span>
                o<span class="token punctuation">.</span>update<span class="token punctuation">(</span>self<span class="token punctuation">)</span>


<span class="token keyword">class</span> <span class="token class-name">Observer</span><span class="token punctuation">(</span>metaclass<span class="token operator">=</span>ABCMeta<span class="token punctuation">)</span><span class="token punctuation">:</span>
    @abstractmethod
    <span class="token keyword">def</span> <span class="token function">update</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> waterHeater<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">pass</span>


<span class="token keyword">class</span> <span class="token class-name">WashingMode</span><span class="token punctuation">(</span>Observer<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">update</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> waterHeater<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> waterHeater<span class="token punctuation">.</span>get_temperature<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">70</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"【洗澡模式】 开始洗白白~ "</span><span class="token punctuation">)</span>


<span class="token keyword">class</span> <span class="token class-name">DrinkingMode</span><span class="token punctuation">(</span>Observer<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">update</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> waterHeater<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> waterHeater<span class="token punctuation">.</span>get_temperature<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">100</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"【饮用模式】 水可以喝了~ "</span><span class="token punctuation">)</span>


<span class="token keyword">class</span> <span class="token class-name">PlayingMode</span><span class="token punctuation">(</span>Observer<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">update</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> waterHeater<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token number">30</span> <span class="token operator">&lt;</span> waterHeater<span class="token punctuation">.</span>get_temperature<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">50</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"【快乐模式】 尽情嗨皮吧~ "</span><span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    myWaterHeater <span class="token operator">=</span> WaterHeater<span class="token punctuation">(</span><span class="token punctuation">)</span>
    myWaterHeater<span class="token punctuation">.</span>add_observers<span class="token punctuation">(</span>WashingMode<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    myWaterHeater<span class="token punctuation">.</span>add_observers<span class="token punctuation">(</span>DrinkingMode<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    myWaterHeater<span class="token punctuation">.</span>add_observers<span class="token punctuation">(</span>PlayingMode<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    myWaterHeater<span class="token punctuation">.</span>set_temperature<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
    myWaterHeater<span class="token punctuation">.</span>set_temperature<span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span>
    myWaterHeater<span class="token punctuation">.</span>set_temperature<span class="token punctuation">(</span><span class="token number">70</span><span class="token punctuation">)</span>
    myWaterHeater<span class="token punctuation">.</span>set_temperature<span class="token punctuation">(</span><span class="token number">90</span><span class="token punctuation">)</span>
    myWaterHeater<span class="token punctuation">.</span>set_temperature<span class="token punctuation">(</span><span class="token number">110</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># output</span>
【初始化】热水器开始工作啦<span class="token operator">~</span><span class="token operator">~</span><span class="token operator">~</span>
【设置温度】将温度设置为： <span class="token number">10</span>
【设置温度】将温度设置为： <span class="token number">40</span>
【快乐模式】 尽情嗨皮吧<span class="token operator">~</span> 
【设置温度】将温度设置为： <span class="token number">70</span>
【设置温度】将温度设置为： <span class="token number">90</span>
【洗澡模式】 开始洗白白<span class="token operator">~</span> 
【设置温度】将温度设置为： <span class="token number">110</span>
【洗澡模式】 开始洗白白<span class="token operator">~</span> 
【饮用模式】 水可以喝了<span class="token operator">~</span> 
</code></pre>
<ul>
<li>主要代码  ，设置被监听的属性，如果改变则更新同步到所有的监听</li>
</ul>
<pre class=" language-python"><code class="language-python">    <span class="token keyword">def</span> <span class="token function">set_temperature</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> t<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token number">0</span> <span class="token operator">&lt;</span> t <span class="token operator">&lt;=</span> <span class="token number">200</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"【设置温度】将温度设置为："</span><span class="token punctuation">,</span> t<span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>__temperature <span class="token operator">=</span> t
            self<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token punctuation">)</span>
    
    <span class="token keyword">def</span> <span class="token function">update</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> len<span class="token punctuation">(</span>self<span class="token punctuation">.</span>__observers<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">:</span>
            <span class="token keyword">for</span> o <span class="token keyword">in</span> self<span class="token punctuation">.</span>__observers<span class="token punctuation">:</span>
                <span class="token comment" spellcheck="true"># 把自己传递过去</span>
                o<span class="token punctuation">.</span>update<span class="token punctuation">(</span>self<span class="token punctuation">)</span>
</code></pre>
<ul>
<li><code>监听者模式的要点是搞清楚 谁是监听者，谁是被监听的对象， 被监听对象的属性是什么，一旦被监听者的属性发生改变则立即通知监听者（使用统一的接口update）</code></li>
<li>监听者模式的框架：</li>
</ul>
<pre class=" language-python"><code class="language-python"><span class="token keyword">from</span> abc <span class="token keyword">import</span> ABCMeta<span class="token punctuation">,</span> abstractmethod


<span class="token keyword">class</span> <span class="token class-name">Observable</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>__observers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

    <span class="token keyword">def</span> <span class="token function">add_observer</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> observer<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>__observers<span class="token punctuation">.</span>append<span class="token punctuation">(</span>observer<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">remove_observer</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> observer<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>__observers<span class="token punctuation">.</span>remove<span class="token punctuation">(</span>observer<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">notifies</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> object<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">for</span> o <span class="token keyword">in</span> self<span class="token punctuation">.</span>__observers<span class="token punctuation">:</span>
            o<span class="token punctuation">.</span>update<span class="token punctuation">(</span>self<span class="token punctuation">,</span> object<span class="token punctuation">)</span>


<span class="token keyword">class</span> <span class="token class-name">Observer</span><span class="token punctuation">(</span>metaclass<span class="token operator">=</span>ABCMeta<span class="token punctuation">)</span><span class="token punctuation">:</span>
    @abstractmethod
    <span class="token keyword">def</span> <span class="token function">update</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> observable<span class="token punctuation">,</span> object<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">pass</span>
</code></pre>
<ul>
<li>案例，用监听者模式做异地登录检测。</li>
</ul>
<pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 判断用户是否异常登录，如果正常登录则发送短信、邮件通知</span>
<span class="token comment" spellcheck="true"># 用户为被观察者，被观察的属性为登录状态（是否异地登录），观察者（短信、邮件）</span>
<span class="token keyword">class</span> <span class="token class-name">Account</span><span class="token punctuation">(</span>Observable<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        super<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>__last_login_ip <span class="token operator">=</span> <span class="token string">''</span>

    <span class="token keyword">def</span> <span class="token function">get_lastip</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>__last_login_ip

    <span class="token keyword">def</span> <span class="token function">login</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> ip<span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'[登录成功] 您的登录IP为: &amp;#123;&amp;#125; ,用户名为: &amp;#123;&amp;#125;'</span><span class="token punctuation">.</span>format<span class="token punctuation">(</span>ip<span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>is_lastip<span class="token punctuation">(</span>ip<span class="token punctuation">)</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>notifies<span class="token punctuation">(</span>self<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>__last_login_ip <span class="token operator">=</span> ip

    <span class="token keyword">def</span> <span class="token function">is_lastip</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> ip<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>__last_login_ip <span class="token operator">!=</span> <span class="token string">''</span> <span class="token operator">and</span> self<span class="token punctuation">.</span>__last_login_ip <span class="token operator">!=</span> ip<span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token boolean">True</span>


<span class="token keyword">class</span> <span class="token class-name">SMS</span><span class="token punctuation">(</span>Observer<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">update</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> observable<span class="token punctuation">,</span> object<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'[短信通知] 您的账户异地登录，上次登录的IP为： &amp;#123;&amp;#125;'</span><span class="token punctuation">.</span>format<span class="token punctuation">(</span>object<span class="token punctuation">.</span>get_lastip<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>


<span class="token keyword">class</span> <span class="token class-name">Email</span><span class="token punctuation">(</span>Observer<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">update</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> observable<span class="token punctuation">,</span> object<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'[邮件通知] 您的账户异常登录，上次登录的IP为： &amp;#123;&amp;#125;'</span><span class="token punctuation">.</span>format<span class="token punctuation">(</span>object<span class="token punctuation">.</span>get_lastip<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    account <span class="token operator">=</span> Account<span class="token punctuation">(</span><span class="token punctuation">)</span>
    account<span class="token punctuation">.</span>add_observer<span class="token punctuation">(</span>SMS<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    account<span class="token punctuation">.</span>add_observer<span class="token punctuation">(</span>Email<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    account<span class="token punctuation">.</span>login<span class="token punctuation">(</span><span class="token string">'1.1.1.1'</span><span class="token punctuation">,</span> <span class="token string">'tom'</span><span class="token punctuation">)</span>
    account<span class="token punctuation">.</span>login<span class="token punctuation">(</span><span class="token string">'2.2.2.2'</span><span class="token punctuation">,</span> <span class="token string">'tom'</span><span class="token punctuation">)</span>
    account<span class="token punctuation">.</span>login<span class="token punctuation">(</span><span class="token string">'2.2.2.2'</span><span class="token punctuation">,</span> <span class="token string">'tom'</span><span class="token punctuation">)</span>

    
<span class="token comment" spellcheck="true"># output </span>
<span class="token punctuation">[</span>登录成功<span class="token punctuation">]</span> 您的登录IP为<span class="token punctuation">:</span> <span class="token number">1.1</span><span class="token punctuation">.</span><span class="token number">1.1</span> <span class="token punctuation">,</span>用户名为<span class="token punctuation">:</span> tom
<span class="token punctuation">[</span>登录成功<span class="token punctuation">]</span> 您的登录IP为<span class="token punctuation">:</span> <span class="token number">2.2</span><span class="token punctuation">.</span><span class="token number">2.2</span> <span class="token punctuation">,</span>用户名为<span class="token punctuation">:</span> tom
<span class="token punctuation">[</span>短信通知<span class="token punctuation">]</span> 您的账户异地登录，上次登录的IP为： <span class="token number">1.1</span><span class="token punctuation">.</span><span class="token number">1.1</span>
<span class="token punctuation">[</span>邮件通知<span class="token punctuation">]</span> 您的账户异常登录，上次登录的IP为： <span class="token number">1.1</span><span class="token punctuation">.</span><span class="token number">1.1</span>
<span class="token punctuation">[</span>登录成功<span class="token punctuation">]</span> 您的登录IP为<span class="token punctuation">:</span> <span class="token number">2.2</span><span class="token punctuation">.</span><span class="token number">2.2</span> <span class="token punctuation">,</span>用户名为<span class="token punctuation">:</span> tom
</code></pre>
<h2 id="2-状态模式"><a href="#2-状态模式" class="headerlink" title="2. 状态模式"></a>2. 状态模式</h2><ul>
<li><p>状态模式让类可以无缝切换状态，各状态有统一的接口不同的行为。</p>
</li>
<li><p>示例，模仿水在固态、气态、液态切换</p>
<pre class=" language-python"><code class="language-python"><span class="token keyword">from</span> abc <span class="token keyword">import</span> ABCMeta<span class="token punctuation">,</span> abstractmethod


<span class="token keyword">class</span> <span class="token class-name">Water</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>__temperatrue <span class="token operator">=</span> <span class="token number">0</span>
        self<span class="token punctuation">.</span>__state <span class="token operator">=</span> None

    <span class="token keyword">def</span> <span class="token function">change_state</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> state<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>state <span class="token keyword">is</span> None<span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"初始化状态为："</span><span class="token punctuation">,</span> state<span class="token punctuation">.</span>get_name<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"状态由"</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>__state<span class="token punctuation">.</span>get_name<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"变更为："</span><span class="token punctuation">,</span> state<span class="token punctuation">.</span>get_name<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

        self<span class="token punctuation">.</span>__state <span class="token operator">=</span> state
    
    <span class="token comment" spellcheck="true"># 属性改变时切换状态</span>
    <span class="token keyword">def</span> <span class="token function">set_temperature</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> temperature<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> temperature <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>change_state<span class="token punctuation">(</span>SolidState<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">elif</span> temperature <span class="token operator">&lt;=</span> <span class="token number">100</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>change_state<span class="token punctuation">(</span>LiquidState<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>change_state<span class="token punctuation">(</span>GaseousState<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">get_temperatrue</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>__temperatrue

    <span class="token keyword">def</span> <span class="token function">behavior</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>__state<span class="token punctuation">.</span>behavior<span class="token punctuation">(</span>self<span class="token punctuation">)</span>


<span class="token keyword">class</span> <span class="token class-name">State</span><span class="token punctuation">(</span>metaclass<span class="token operator">=</span>ABCMeta<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">""</span>

    @abstractmethod
    <span class="token keyword">def</span> <span class="token function">behavior</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> water<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">pass</span>


<span class="token keyword">class</span> <span class="token class-name">SolidState</span><span class="token punctuation">(</span>State<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        super<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"固态"</span>

    <span class="token keyword">def</span> <span class="token function">behavior</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> water<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"我是固态，当前温度为："</span><span class="token punctuation">,</span> water<span class="token punctuation">.</span>get_temperatrue<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>


<span class="token keyword">class</span> <span class="token class-name">LiquidState</span><span class="token punctuation">(</span>State<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        super<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"液态"</span>

    <span class="token keyword">def</span> <span class="token function">behavior</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> water<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"我是液态，当前温度为："</span><span class="token punctuation">,</span> water<span class="token punctuation">.</span>get_temperatrue<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>


<span class="token keyword">class</span> <span class="token class-name">GaseousState</span><span class="token punctuation">(</span>State<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        super<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"气态"</span>

    <span class="token keyword">def</span> <span class="token function">behavior</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> water<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"我是液态，当前温度为："</span><span class="token punctuation">,</span> water<span class="token punctuation">.</span>get_temperatrue<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
</li>
<li><p>主要代码，提供一个状态接口，有统一的行为，当属性更变时即可无缝切换。</p>
<pre class=" language-python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Water</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>__temperatrue <span class="token operator">=</span> <span class="token number">0</span>
        self<span class="token punctuation">.</span>__state <span class="token operator">=</span> None
        
    <span class="token comment" spellcheck="true"># 属性改变时切换状态</span>
    <span class="token keyword">def</span> <span class="token function">set_temperature</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> temperature<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> temperature <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>change_state<span class="token punctuation">(</span>SolidState<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">elif</span> temperature <span class="token operator">&lt;=</span> <span class="token number">100</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>change_state<span class="token punctuation">(</span>LiquidState<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>change_state<span class="token punctuation">(</span>GaseousState<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">behavior</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>__state<span class="token punctuation">.</span>behavior<span class="token punctuation">(</span>self<span class="token punctuation">)</span>
</code></pre>
</li>
<li><p>基于框架的代码实现。</p>
<pre class=" language-python"><code class="language-python"><span class="token keyword">from</span> abc <span class="token keyword">import</span> ABCMeta<span class="token punctuation">,</span> abstractmethod


<span class="token keyword">class</span> <span class="token class-name">Context</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>__states <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        self<span class="token punctuation">.</span>__state_info <span class="token operator">=</span> None
        self<span class="token punctuation">.</span>__current_state <span class="token operator">=</span> None

    <span class="token keyword">def</span> <span class="token function">add_state</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> state<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> state <span class="token operator">not</span> <span class="token keyword">in</span> self<span class="token punctuation">.</span>__states<span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>__states<span class="token punctuation">.</span>append<span class="token punctuation">(</span>state<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">change_state</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> state<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>__current_state <span class="token operator">=</span> state
        self<span class="token punctuation">.</span>add_state<span class="token punctuation">(</span>state<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">set_state_info</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">for</span> state <span class="token keyword">in</span> self<span class="token punctuation">.</span>__states<span class="token punctuation">:</span>
            <span class="token comment" spellcheck="true"># 降低耦合，把判断条件交给子类区判断</span>
            <span class="token keyword">if</span> state<span class="token punctuation">.</span>is_match<span class="token punctuation">(</span>self<span class="token punctuation">.</span>__state_info<span class="token punctuation">)</span><span class="token punctuation">:</span>
                self<span class="token punctuation">.</span>change_state<span class="token punctuation">(</span>state<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">behavior</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>__current_state<span class="token punctuation">.</span>behavior<span class="token punctuation">(</span>self<span class="token punctuation">)</span>


<span class="token keyword">class</span> <span class="token class-name">State</span><span class="token punctuation">(</span>metaclass<span class="token operator">=</span>ABCMeta<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name

    <span class="token keyword">def</span> <span class="token function">get_name</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>name

    <span class="token keyword">def</span> <span class="token function">is_match</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> state_info<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token boolean">False</span>

    @abstractmethod
    <span class="token keyword">def</span> <span class="token function">behavior</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> context<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">pass</span>
</code></pre>
</li>
</ul>
<h2 id="3-中介模式"><a href="#3-中介模式" class="headerlink" title="3. 中介模式"></a>3. 中介模式</h2><ul>
<li><p>中介模式，适用1对多的情况，将中间复杂的关系交给中介处理，个体1只需要处理与中介的逻辑即可。</p>
</li>
<li><p>中介找房案例</p>
<pre class=" language-python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">HouseInfo</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> area<span class="token punctuation">,</span> price<span class="token punctuation">,</span> has_window<span class="token punctuation">,</span> has_bathroom<span class="token punctuation">,</span> has_kitchen<span class="token punctuation">,</span> address<span class="token punctuation">,</span> owner<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>__area <span class="token operator">=</span> area
        self<span class="token punctuation">.</span>__price <span class="token operator">=</span> price
        self<span class="token punctuation">.</span>__has_window <span class="token operator">=</span> has_window
        self<span class="token punctuation">.</span>__has_bathroom <span class="token operator">=</span> has_bathroom
        self<span class="token punctuation">.</span>__has_kitchen <span class="token operator">=</span> has_kitchen
        self<span class="token punctuation">.</span>__address <span class="token operator">=</span> address
        self<span class="token punctuation">.</span>__owner <span class="token operator">=</span> owner

    <span class="token keyword">def</span> <span class="token function">get_address</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>__address

    <span class="token keyword">def</span> <span class="token function">get_onwer_name</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>__owner<span class="token punctuation">.</span>get_name<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">show_info</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"面积： "</span> <span class="token operator">+</span> str<span class="token punctuation">(</span>self<span class="token punctuation">.</span>__area<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"平方米"</span> <span class="token operator">+</span>
              <span class="token string">"价格： "</span> <span class="token operator">+</span> str<span class="token punctuation">(</span>self<span class="token punctuation">.</span>__price<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"元"</span> <span class="token operator">+</span>
              <span class="token string">"窗户： "</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token string">"有"</span> <span class="token keyword">if</span> self<span class="token punctuation">.</span>__has_window <span class="token keyword">else</span> <span class="token string">"没有"</span><span class="token punctuation">)</span> <span class="token operator">+</span>
              <span class="token string">"厨房： "</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token string">"有"</span> <span class="token keyword">if</span> self<span class="token punctuation">.</span>__has_kitchen <span class="token keyword">else</span> <span class="token string">"没有"</span><span class="token punctuation">)</span> <span class="token operator">+</span>
              <span class="token string">"浴室： "</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token string">"有"</span> <span class="token keyword">if</span> self<span class="token punctuation">.</span>__has_bathroom <span class="token keyword">else</span> <span class="token string">"没有"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>


<span class="token keyword">class</span> <span class="token class-name">HousingAgency</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>__house_infos <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        self<span class="token punctuation">.</span>__name <span class="token operator">=</span> name

    <span class="token keyword">def</span> <span class="token function">get_name</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>__name

    <span class="token keyword">def</span> <span class="token function">add_houseinfo</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> houseinfo<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> houseinfo <span class="token operator">not</span> <span class="token keyword">in</span> self<span class="token punctuation">.</span>__house_infos<span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>__house_infos<span class="token punctuation">.</span>append<span class="token punctuation">(</span>houseinfo<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">remove_houseinfo</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> houseinfo<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">for</span> info <span class="token keyword">in</span> self<span class="token punctuation">.</span>__house_infos<span class="token punctuation">:</span>
            <span class="token keyword">if</span> info <span class="token operator">==</span> houseinfo<span class="token punctuation">:</span>
                self<span class="token punctuation">.</span>__house_infos<span class="token punctuation">.</span>remove<span class="token punctuation">(</span>info<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">get_search_condition</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> description<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> description

    <span class="token keyword">def</span> <span class="token function">get_match_infos</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> search_condition<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>get_name<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"为您找到一下最合适的房源："</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> info <span class="token keyword">in</span> self<span class="token punctuation">.</span>__house_infos<span class="token punctuation">:</span>
            info<span class="token punctuation">.</span>show_info<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>__house_infos

    <span class="token keyword">def</span> <span class="token function">sign_contract</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> houseinfo<span class="token punctuation">,</span> period<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>get_name<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"与房东"</span><span class="token punctuation">,</span> houseinfo<span class="token punctuation">.</span>get_onwer_name<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"签订"</span><span class="token punctuation">,</span> houseinfo<span class="token punctuation">.</span>get_address<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"的房子合同，租期为："</span><span class="token punctuation">,</span> period<span class="token punctuation">,</span> <span class="token string">"年, 租期内"</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>get_name<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"有权对其进行使用和转租！"</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">sign_contracts</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> period<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">for</span> info <span class="token keyword">in</span> self<span class="token punctuation">.</span>__house_infos<span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>sign_contract<span class="token punctuation">(</span>info<span class="token punctuation">,</span> period<span class="token punctuation">)</span>


<span class="token keyword">class</span> <span class="token class-name">HouseOwner</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>__name <span class="token operator">=</span> name
        self<span class="token punctuation">.</span>__houseinfo <span class="token operator">=</span> None

    <span class="token keyword">def</span> <span class="token function">get_name</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>__name

    <span class="token keyword">def</span> <span class="token function">set_houseinfo</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>  area<span class="token punctuation">,</span> price<span class="token punctuation">,</span> has_window<span class="token punctuation">,</span> has_bathroom<span class="token punctuation">,</span> has_kitchen<span class="token punctuation">,</span> address<span class="token punctuation">,</span> owner<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>__houseinfo <span class="token operator">=</span> HouseInfo<span class="token punctuation">(</span>area<span class="token punctuation">,</span> price<span class="token punctuation">,</span> has_window<span class="token punctuation">,</span> has_bathroom<span class="token punctuation">,</span> has_kitchen<span class="token punctuation">,</span> address<span class="token punctuation">,</span> owner<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">public_houseinfo</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> agency<span class="token punctuation">)</span><span class="token punctuation">:</span>
        agency<span class="token punctuation">.</span>add_houseinfo<span class="token punctuation">(</span>self<span class="token punctuation">.</span>__houseinfo<span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>get_name<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"在"</span><span class="token punctuation">,</span> agency<span class="token punctuation">.</span>get_name<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"发布房源出租信息"</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>__houseinfo<span class="token punctuation">.</span>show_info<span class="token punctuation">(</span><span class="token punctuation">)</span>


<span class="token keyword">class</span> <span class="token class-name">Customer</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>__name <span class="token operator">=</span> name

    <span class="token keyword">def</span> <span class="token function">get_name</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>__name

    <span class="token keyword">def</span> <span class="token function">find_house</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> description<span class="token punctuation">,</span> agency<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"我是"</span> <span class="token operator">+</span> self<span class="token punctuation">.</span>get_name<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"，我想找一个"</span><span class="token punctuation">,</span> description <span class="token punctuation">,</span> <span class="token string">"的房子"</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> agency<span class="token punctuation">.</span>get_match_infos<span class="token punctuation">(</span>agency<span class="token punctuation">.</span>get_search_condition<span class="token punctuation">(</span>description<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">see_house</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> houseinfos<span class="token punctuation">)</span><span class="token punctuation">:</span>
        size <span class="token operator">=</span> len<span class="token punctuation">(</span>houseinfos<span class="token punctuation">)</span>
        <span class="token keyword">return</span> houseinfos<span class="token punctuation">[</span>size<span class="token number">-1</span><span class="token punctuation">]</span>

    <span class="token keyword">def</span> <span class="token function">sign_contract</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> houseinfo<span class="token punctuation">,</span> agency<span class="token punctuation">,</span> period<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>get_name<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"与中介"</span><span class="token punctuation">,</span> agency<span class="token punctuation">.</span>get_name<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"签订"</span><span class="token punctuation">,</span> houseinfo<span class="token punctuation">.</span>get_address<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"的房子的组人合同，租期"</span><span class="token punctuation">,</span> period<span class="token punctuation">,</span> <span class="token string">"年，合同期内"</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>__name <span class="token punctuation">,</span> <span class="token string">"有权使用！"</span><span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    myhome <span class="token operator">=</span> HousingAgency<span class="token punctuation">(</span><span class="token string">"我爱你家"</span><span class="token punctuation">)</span>
    zhangsan <span class="token operator">=</span> HouseOwner<span class="token punctuation">(</span><span class="token string">"张三"</span><span class="token punctuation">)</span>
    zhangsan<span class="token punctuation">.</span>set_houseinfo<span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">2600</span><span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">,</span> <span class="token boolean">False</span><span class="token punctuation">,</span> <span class="token boolean">False</span><span class="token punctuation">,</span> <span class="token string">"上地犀利"</span><span class="token punctuation">,</span> zhangsan<span class="token punctuation">)</span>
    zhangsan<span class="token punctuation">.</span>public_houseinfo<span class="token punctuation">(</span>myhome<span class="token punctuation">)</span>

    lisi <span class="token operator">=</span> HouseOwner<span class="token punctuation">(</span><span class="token string">"李四"</span><span class="token punctuation">)</span>
    lisi<span class="token punctuation">.</span>set_houseinfo<span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">3800</span><span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">,</span> <span class="token string">"西二旗的太阳"</span><span class="token punctuation">,</span> lisi<span class="token punctuation">)</span>
    lisi<span class="token punctuation">.</span>public_houseinfo<span class="token punctuation">(</span>myhome<span class="token punctuation">)</span>

    wangwu <span class="token operator">=</span> HouseOwner<span class="token punctuation">(</span><span class="token string">"王五"</span><span class="token punctuation">)</span>
    wangwu<span class="token punctuation">.</span>set_houseinfo<span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">5200</span><span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">,</span> <span class="token string">"东直门的艾利欧"</span><span class="token punctuation">,</span> wangwu<span class="token punctuation">)</span>
    wangwu<span class="token punctuation">.</span>public_houseinfo<span class="token punctuation">(</span>myhome<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    myhome<span class="token punctuation">.</span>sign_contracts<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    tony <span class="token operator">=</span> Customer<span class="token punctuation">(</span><span class="token string">"Tony"</span><span class="token punctuation">)</span>
    houseinfos <span class="token operator">=</span> tony<span class="token punctuation">.</span>find_house<span class="token punctuation">(</span><span class="token string">"18平方米，要有独立卫生间，要有窗户，最好朝南，有厨房更好！价位200左右"</span><span class="token punctuation">,</span> myhome<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"正在看房，寻找最合适的房子"</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    appropriate_house <span class="token operator">=</span> tony<span class="token punctuation">.</span>see_house<span class="token punctuation">(</span>houseinfos<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    tony<span class="token punctuation">.</span>sign_contract<span class="token punctuation">(</span>appropriate_house<span class="token punctuation">,</span> myhome<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>

</code></pre>
</li>
<li><p>主要代码，没有主要代码，上述案例只是一种体现中介模式的方式，中介将个人与房东联合的操作聚合在一个类中，方便了个人与房东，但是复杂了中介类。</p>
</li>
<li><p>设备驱动案例</p>
<pre class=" language-python"><code class="language-python"><span class="token keyword">from</span> abc <span class="token keyword">import</span> ABCMeta<span class="token punctuation">,</span> abstractmethod
<span class="token keyword">from</span> enum <span class="token keyword">import</span> Enum


<span class="token keyword">class</span> <span class="token class-name">DeviceType</span><span class="token punctuation">(</span>Enum<span class="token punctuation">)</span><span class="token punctuation">:</span>
    TypeSpeaker <span class="token operator">=</span> <span class="token number">1</span>
    TypeMicrophone <span class="token operator">=</span> <span class="token number">2</span>
    TypeCamera <span class="token operator">=</span> <span class="token number">3</span>


<span class="token keyword">class</span> <span class="token class-name">DeviceItem</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> type<span class="token punctuation">,</span> isDefault<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>__id <span class="token operator">=</span> id
        self<span class="token punctuation">.</span>__name <span class="token operator">=</span> name
        self<span class="token punctuation">.</span>__type <span class="token operator">=</span> type
        self<span class="token punctuation">.</span>__isDefault <span class="token operator">=</span> isDefault

    <span class="token keyword">def</span> <span class="token function">__str__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">"type: "</span> <span class="token operator">+</span> str<span class="token punctuation">(</span>self<span class="token punctuation">.</span>__type<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"id: "</span> <span class="token operator">+</span> str<span class="token punctuation">(</span>self<span class="token punctuation">.</span>__id<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"name: "</span> <span class="token operator">+</span> str<span class="token punctuation">(</span>
            self<span class="token punctuation">.</span>__name<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"isDefault: "</span> <span class="token operator">+</span> str<span class="token punctuation">(</span>self<span class="token punctuation">.</span>__isDefault<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">getId</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>__id

    <span class="token keyword">def</span> <span class="token function">getNmae</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>__name

    <span class="token keyword">def</span> <span class="token function">getType</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>__type

    <span class="token keyword">def</span> <span class="token function">isDefault</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>__isDefault


<span class="token keyword">class</span> <span class="token class-name">DeviceList</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>__devices <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

    <span class="token keyword">def</span> <span class="token function">add</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> deviceItem<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>__devices<span class="token punctuation">.</span>append<span class="token punctuation">(</span>deviceItem<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">getCount</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> len<span class="token punctuation">(</span>self<span class="token punctuation">.</span>__devices<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">getByIdx</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> idx<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> idx <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">or</span> idx <span class="token operator">>=</span> self<span class="token punctuation">.</span>getCount<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> None
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>__devices<span class="token punctuation">[</span>idx<span class="token punctuation">]</span>

    <span class="token keyword">def</span> <span class="token function">getById</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">for</span> item <span class="token keyword">in</span> self<span class="token punctuation">.</span>__devices<span class="token punctuation">:</span>
            <span class="token keyword">if</span> item<span class="token punctuation">.</span>getId<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> id<span class="token punctuation">:</span>
                <span class="token keyword">return</span> item
        <span class="token keyword">return</span> None


<span class="token keyword">class</span> <span class="token class-name">DeviceMgr</span><span class="token punctuation">(</span>metaclass<span class="token operator">=</span>ABCMeta<span class="token punctuation">)</span><span class="token punctuation">:</span>
    @abstractmethod
    <span class="token keyword">def</span> <span class="token function">enumerate</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">pass</span>

    @abstractmethod
    <span class="token keyword">def</span> <span class="token function">active</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> deviceId<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">pass</span>

    @abstractmethod
    <span class="token keyword">def</span> <span class="token function">getCurDeviceId</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">pass</span>


<span class="token keyword">class</span> <span class="token class-name">SpeakerMgr</span><span class="token punctuation">(</span>DeviceMgr<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>__curDeviceId <span class="token operator">=</span> None

    <span class="token keyword">def</span> <span class="token function">enumerate</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        devices <span class="token operator">=</span> DeviceList<span class="token punctuation">(</span><span class="token punctuation">)</span>
        devices<span class="token punctuation">.</span>add<span class="token punctuation">(</span>
            DeviceItem<span class="token punctuation">(</span><span class="token string">"37dd1024-843b-83a1-934c-81ac9230111"</span><span class="token punctuation">,</span> <span class="token string">"Realtek HighDefinition Audio"</span><span class="token punctuation">,</span> DeviceType<span class="token punctuation">.</span>TypeSpeaker<span class="token punctuation">,</span>
                       <span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        devices<span class="token punctuation">.</span>add<span class="token punctuation">(</span>
            DeviceItem<span class="token punctuation">(</span><span class="token string">"215a41c60-1313-24aa-1241-324ac3f445"</span><span class="token punctuation">,</span> <span class="token string">"NVIDIA HighDefinition Audio"</span><span class="token punctuation">,</span> DeviceType<span class="token punctuation">.</span>TypeSpeaker<span class="token punctuation">,</span>
                       <span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> devices

    <span class="token keyword">def</span> <span class="token function">active</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> deviceId<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>__curDeviceId <span class="token operator">=</span> deviceId

    <span class="token keyword">def</span> <span class="token function">getCurDeviceId</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>__curDeviceId


<span class="token keyword">class</span> <span class="token class-name">DeviceUtil</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>__mgrs <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;DeviceType.TypeSpeaker: SpeakerMgr()&amp;#125;</span>
        <span class="token comment" spellcheck="true"># self.__microphoneMgr =</span>

    <span class="token keyword">def</span> <span class="token function">__getDeviceMgr</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> type<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>__mgrs<span class="token punctuation">[</span>type<span class="token punctuation">]</span>

    <span class="token keyword">def</span> <span class="token function">getDeviceList</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> type<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>__getDeviceMgr<span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">.</span>enumerate<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">active</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> type<span class="token punctuation">,</span> deviceId<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>__getDeviceMgr<span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">.</span>active<span class="token punctuation">(</span>deviceId<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">getCurDeviceId</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> type<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>__getDeviceMgr<span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">.</span>getCurDeviceId<span class="token punctuation">(</span><span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    deviceUtil <span class="token operator">=</span> DeviceUtil<span class="token punctuation">(</span><span class="token punctuation">)</span>
    deviceList <span class="token operator">=</span> deviceUtil<span class="token punctuation">.</span>getDeviceList<span class="token punctuation">(</span>DeviceType<span class="token punctuation">.</span>TypeSpeaker<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"麦克风设备列表："</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> devDeviceItemiceList<span class="token punctuation">.</span>getCount<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">:</span>
        deviceUtil<span class="token punctuation">.</span>active<span class="token punctuation">(</span>DeviceType<span class="token punctuation">.</span>TypeSpeaker<span class="token punctuation">,</span> deviceList<span class="token punctuation">.</span>getByIdx<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span>getId<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">for</span> idx <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> deviceList<span class="token punctuation">.</span>getCount<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        device <span class="token operator">=</span> deviceList<span class="token punctuation">.</span>getByIdx<span class="token punctuation">(</span>idx<span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>device<span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"当前使用的设备："</span> <span class="token operator">+</span> deviceList<span class="token punctuation">.</span>getById<span class="token punctuation">(</span>deviceUtil<span class="token punctuation">.</span>getCurDeviceId<span class="token punctuation">(</span>DeviceType<span class="token punctuation">.</span>TypeSpeaker<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>getNmae<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
</li>
<li><p>分析，上述代码是将DeviceMgr作为中介，在一对多的关系中，DeviceItem是多，DeviceUtil是1，DeviceMgr将一个类型的驱动聚合，提供给DeviceUtil用。</p>
<pre class=" language-python"><code class="language-python">DeviceItem
DeviceMgr
SpeakerMgr
DeviceUtil
</code></pre>
</li>
</ul>
<h2 id="4-装饰模式"><a href="#4-装饰模式" class="headerlink" title="4. 装饰模式"></a>4. 装饰模式</h2><ul>
<li><p>装饰模式，可以让类在不改变自身的前提下添加更多功能</p>
</li>
<li><p>装饰模式实现的主要地方在于装饰类继承被装饰类、去嵌套执行被装饰者的方法并且额外扩充功能</p>
<pre class=" language-python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Person</span><span class="token punctuation">(</span>metaclass<span class="token operator">=</span>ABCMeta<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>_name <span class="token operator">=</span> name

    @abstractmethod
    <span class="token keyword">def</span> <span class="token function">wear</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"着装："</span><span class="token punctuation">)</span>

<span class="token keyword">class</span> <span class="token class-name">ClothingDecorator</span><span class="token punctuation">(</span>Person<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> person<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>_decorated <span class="token operator">=</span> person

    <span class="token keyword">def</span> <span class="token function">wear</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>_decorated<span class="token punctuation">.</span>wear<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>decorate<span class="token punctuation">(</span><span class="token punctuation">)</span>

    @abstractmethod
    <span class="token keyword">def</span> <span class="token function">decorate</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">pass</span>

<span class="token keyword">class</span> <span class="token class-name">CasulPantDecorator</span><span class="token punctuation">(</span>ClothingDecorator<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> person<span class="token punctuation">)</span><span class="token punctuation">:</span>
        super<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>person<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">decorate</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"一条卡其色休闲裤"</span><span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    tony <span class="token operator">=</span> Engineer<span class="token punctuation">(</span><span class="token string">"Tony"</span><span class="token punctuation">,</span> <span class="token string">"客户端开发"</span><span class="token punctuation">)</span>
    pant <span class="token operator">=</span> CasulPantDecorator<span class="token punctuation">(</span>tony<span class="token punctuation">)</span>
    belt <span class="token operator">=</span> BeltDecorator<span class="token punctuation">(</span>pant<span class="token punctuation">)</span>
    shoes <span class="token operator">=</span> LeatherShoesDecorator<span class="token punctuation">(</span>belt<span class="token punctuation">)</span>
    sweater <span class="token operator">=</span> KnittedSweaterDecorator<span class="token punctuation">(</span>shoes<span class="token punctuation">)</span>
    glasses <span class="token operator">=</span> GlassedDecorator<span class="token punctuation">(</span>sweater<span class="token punctuation">)</span>
    glasses<span class="token punctuation">.</span>wear<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
</li>
<li><p>主要代码，主要在这个ClothingDecorator类上，可以递归继承，调用</p>
<pre class=" language-python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">ClothingDecorator</span><span class="token punctuation">(</span>Person<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> person<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>_decorated <span class="token operator">=</span> person
    <span class="token keyword">def</span> <span class="token function">wear</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>_decorated<span class="token punctuation">.</span>wear<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>decorate<span class="token punctuation">(</span><span class="token punctuation">)</span>


        
</code></pre>
</li>
<li><p>装饰器，单例模式装饰器</p>
<pre class=" language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">singletonDecorator</span><span class="token punctuation">(</span>cls<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
    instance <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;&amp;#125;</span>
    <span class="token comment" spellcheck="true"># 创建一个字典，以类名作为键 实例作为值，当装饰器运行时先判断是否存在，如果存在则返回实例</span>
    <span class="token keyword">def</span> <span class="token function">wrapperSingleton</span><span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> cls <span class="token operator">not</span> <span class="token keyword">in</span> instance<span class="token punctuation">:</span>
            instance<span class="token punctuation">[</span>cls<span class="token punctuation">]</span> <span class="token operator">=</span> cls<span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span>
        <span class="token keyword">return</span> instance<span class="token punctuation">[</span>cls<span class="token punctuation">]</span>
       
    <span class="token keyword">return</span> wrapperSingleton
</code></pre>
</li>
</ul>
<h2 id="5-单例模式"><a href="#5-单例模式" class="headerlink" title="5. 单例模式"></a>5. 单例模式</h2><ul>
<li><p>单例模式，全局唯一实例</p>
<pre class=" language-python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">MyBeaultifulGril</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">:</span>
    __instance <span class="token operator">=</span> None
    __isFirstInit <span class="token operator">=</span> <span class="token boolean">False</span>
    
    <span class="token comment" spellcheck="true"># 魔术方法，调用前先判断是否已有实例</span>
    <span class="token keyword">def</span> <span class="token function">__new__</span><span class="token punctuation">(</span>cls<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token operator">not</span> cls<span class="token punctuation">.</span>__instance<span class="token punctuation">:</span>
            MyBeaultifulGril<span class="token punctuation">.</span>__instance <span class="token operator">=</span> super<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__new__<span class="token punctuation">(</span>cls<span class="token punctuation">)</span>
        <span class="token keyword">return</span> cls<span class="token punctuation">.</span>__instance

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token operator">not</span> self<span class="token punctuation">.</span>__isFirstInit<span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>__name <span class="token operator">=</span> name
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"遇见"</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">", 我一见钟情"</span><span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>__isFirstInit <span class="token operator">=</span> <span class="token boolean">True</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"遇见"</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">", 我置若罔闻！"</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">showMyHeart</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>__name <span class="token operator">+</span> <span class="token string">"就是我心中的唯一！"</span><span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    jenny <span class="token operator">=</span> MyBeaultifulGril<span class="token punctuation">(</span><span class="token string">"Jenney"</span><span class="token punctuation">)</span>
    jenny<span class="token punctuation">.</span>showMyHeart<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    kimi <span class="token operator">=</span> MyBeaultifulGril<span class="token punctuation">(</span><span class="token string">"kimi"</span><span class="token punctuation">)</span>
    kimi<span class="token punctuation">.</span>showMyHeart<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"id(jenny):"</span><span class="token punctuation">,</span> id<span class="token punctuation">(</span>jenny<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"id(kimi)"</span><span class="token punctuation">,</span> id<span class="token punctuation">(</span>kimi<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
</li>
<li><p>主要代码，使用python内置的模式方法实现单例</p>
<pre class=" language-python"><code class="language-python">    <span class="token comment" spellcheck="true"># 魔术方法，调用前先判断是否已有实例</span>
    <span class="token keyword">def</span> <span class="token function">__new__</span><span class="token punctuation">(</span>cls<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token operator">not</span> cls<span class="token punctuation">.</span>__instance<span class="token punctuation">:</span>
            MyBeaultifulGril<span class="token punctuation">.</span>__instance <span class="token operator">=</span> super<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__new__<span class="token punctuation">(</span>cls<span class="token punctuation">)</span>
        <span class="token keyword">return</span> cls<span class="token punctuation">.</span>__instance
</code></pre>
</li>
</ul>
<h2 id="6-克隆模式"><a href="#6-克隆模式" class="headerlink" title="6.克隆模式"></a>6.克隆模式</h2><ul>
<li><p>克隆模式（也叫原型模式），主要用于克隆属性 ，python的克隆可以用类库来实现</p>
<pre class=" language-python"><code class="language-python"><span class="token keyword">from</span> copy <span class="token keyword">import</span>  copy<span class="token punctuation">,</span> deepcopy


<span class="token keyword">class</span> <span class="token class-name">Person</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>__name <span class="token operator">=</span> name
        self<span class="token punctuation">.</span>__age <span class="token operator">=</span> age

    <span class="token keyword">def</span> <span class="token function">showMySelf</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"我是"</span> <span class="token operator">+</span> self<span class="token punctuation">.</span>__name <span class="token operator">+</span> <span class="token string">",年龄"</span> <span class="token operator">+</span> str<span class="token punctuation">(</span>self<span class="token punctuation">.</span>__age<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">","</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">coding</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"我是码农，我用程序改变世界，Coding..."</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">reading</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"阅读是我快乐！知识是我成长！如饥似渴地阅读是生活的一部分...."</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">fallInLove</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"春风吹，月亮明，花前月下好相约...."</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">clone</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> copy<span class="token punctuation">(</span>self<span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    tony <span class="token operator">=</span> Person<span class="token punctuation">(</span><span class="token string">"Tony"</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">)</span>
    tony<span class="token punctuation">.</span>showMySelf<span class="token punctuation">(</span><span class="token punctuation">)</span>
    tony<span class="token punctuation">.</span>coding<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    tony1 <span class="token operator">=</span> tony<span class="token punctuation">.</span>clone<span class="token punctuation">(</span><span class="token punctuation">)</span>
    tony1<span class="token punctuation">.</span>showMySelf<span class="token punctuation">(</span><span class="token punctuation">)</span>
    tony1<span class="token punctuation">.</span>reading<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    tony2 <span class="token operator">=</span> tony<span class="token punctuation">.</span>clone<span class="token punctuation">(</span><span class="token punctuation">)</span>
    tony2<span class="token punctuation">.</span>showMySelf<span class="token punctuation">(</span><span class="token punctuation">)</span>
    tony2<span class="token punctuation">.</span>fallInLove<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<ul>
<li>浅拷贝只拷贝应用类型对象的指针（指向），不开被引用类型对象指向的值；深拷贝则同事拷贝引用类型对象及其指向的值。</li>
</ul>
</li>
</ul>
<h2 id="7-职责模式"><a href="#7-职责模式" class="headerlink" title="7. 职责模式"></a>7. 职责模式</h2><ul>
<li><p>职责模式 ，解耦请求和处理端，请求端只需要知道下一级是谁即可，处理端只需要处理在自己范围内的事即可。</p>
</li>
<li><p>注意点：设计好下级处理对象，下级对象根据条件匹配，如果相符则执行</p>
<pre class=" language-python"><code class="language-python"><span class="token keyword">from</span> abc <span class="token keyword">import</span> ABCMeta<span class="token punctuation">,</span> abstractmethod


<span class="token keyword">class</span> <span class="token class-name">Person</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> dayoff<span class="token punctuation">,</span> reason<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>__name <span class="token operator">=</span> name
        self<span class="token punctuation">.</span>__dayoff <span class="token operator">=</span> dayoff
        self<span class="token punctuation">.</span>__reason <span class="token operator">=</span> reason
        self<span class="token punctuation">.</span>__leader <span class="token operator">=</span> None

    <span class="token keyword">def</span> <span class="token function">getName</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>__name

    <span class="token keyword">def</span> <span class="token function">getDayoff</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>__dayoff

    <span class="token keyword">def</span> <span class="token function">getReason</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>__reason

    <span class="token keyword">def</span> <span class="token function">setLeader</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> leader<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>__leader <span class="token operator">=</span> leader

    <span class="token keyword">def</span> <span class="token function">request</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"%s 申请请假 %d 天,请假事由： %s"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>__name<span class="token punctuation">,</span> self<span class="token punctuation">.</span>__dayoff<span class="token punctuation">,</span> self<span class="token punctuation">.</span>__reason<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>__leader <span class="token keyword">is</span> <span class="token operator">not</span> None<span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>__leader<span class="token punctuation">.</span>handleRequest<span class="token punctuation">(</span>self<span class="token punctuation">)</span>


<span class="token keyword">class</span> <span class="token class-name">Manager</span><span class="token punctuation">(</span>metaclass<span class="token operator">=</span>ABCMeta<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> title<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>__name <span class="token operator">=</span> name
        self<span class="token punctuation">.</span>__title <span class="token operator">=</span> title
        self<span class="token punctuation">.</span>_nextHandler <span class="token operator">=</span> None

    <span class="token keyword">def</span> <span class="token function">getName</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>__name

    <span class="token keyword">def</span> <span class="token function">getTitle</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>__title

    <span class="token keyword">def</span> <span class="token function">setNextHandle</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nextHandler<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>_nextHandler <span class="token operator">=</span> nextHandler

    @abstractmethod
    <span class="token keyword">def</span> <span class="token function">handleRequest</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> person<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">pass</span>


<span class="token keyword">class</span> <span class="token class-name">Supervisor</span><span class="token punctuation">(</span>Manager<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> title<span class="token punctuation">)</span><span class="token punctuation">:</span>
        super<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>name<span class="token punctuation">,</span> title<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">handleRequest</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> person<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> person<span class="token punctuation">.</span>getDayoff<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token number">2</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"同意 %s 请假，签字人：%s (%s)"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>person<span class="token punctuation">.</span>getName<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>getName<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>getTitle<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

        <span class="token keyword">if</span> self<span class="token punctuation">.</span>_nextHandler <span class="token keyword">is</span> <span class="token operator">not</span> None<span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>_nextHandler<span class="token punctuation">.</span>handleRequest<span class="token punctuation">(</span>person<span class="token punctuation">)</span>

<span class="token keyword">class</span> <span class="token class-name">DepartmentManager</span><span class="token punctuation">(</span>Manager<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> title<span class="token punctuation">)</span><span class="token punctuation">:</span>
        super<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>name<span class="token punctuation">,</span> title<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">handleRequest</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> person<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> person<span class="token punctuation">.</span>getDayoff<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">2</span> <span class="token operator">and</span> person<span class="token punctuation">.</span>getDayoff<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token number">5</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"同意 %s 请假，签字人：%s (%s)"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>person<span class="token punctuation">.</span>getName<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>getName<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>getTitle<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

        <span class="token keyword">if</span> self<span class="token punctuation">.</span>_nextHandler <span class="token keyword">is</span> <span class="token operator">not</span> None<span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>_nextHandler<span class="token punctuation">.</span>handleRequest<span class="token punctuation">(</span>person<span class="token punctuation">)</span>


<span class="token keyword">class</span> <span class="token class-name">CEO</span><span class="token punctuation">(</span>Manager<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> title<span class="token punctuation">)</span><span class="token punctuation">:</span>
        super<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>name<span class="token punctuation">,</span> title<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">handleRequest</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> person<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> person<span class="token punctuation">.</span>getDayoff<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">5</span> <span class="token operator">and</span> person<span class="token punctuation">.</span>getDayoff<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token number">22</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"同意 %s 请假，签字人：%s (%s)"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>person<span class="token punctuation">.</span>getName<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>getName<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>getTitle<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

        <span class="token keyword">if</span> self<span class="token punctuation">.</span>_nextHandler <span class="token keyword">is</span> <span class="token operator">not</span> None<span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>_nextHandler<span class="token punctuation">.</span>handleRequest<span class="token punctuation">(</span>person<span class="token punctuation">)</span>


<span class="token keyword">class</span> <span class="token class-name">Administrator</span><span class="token punctuation">(</span>Manager<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> title<span class="token punctuation">)</span><span class="token punctuation">:</span>
        super<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init    <span class="token comment" spellcheck="true"># 魔术方法，调用前先判断是否已有实例</span>
    <span class="token keyword">def</span> <span class="token function">__new__</span><span class="token punctuation">(</span>cls<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token operator">not</span> cls<span class="token punctuation">.</span>__instance<span class="token punctuation">:</span>
            MyBeaultifulGril<span class="token punctuation">.</span>__instance <span class="token operator">=</span> super<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__new__<span class="token punctuation">(</span>cls<span class="token punctuation">)</span>
        <span class="token keyword">return</span> cls<span class="token punctuation">.</span>__instance__<span class="token punctuation">(</span>name<span class="token punctuation">,</span> title<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">handleRequest</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> person<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"%s 的请假申请已审核，情况属实！已备案处理，处理人：%s(%s)\n"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>person<span class="token punctuation">.</span>getName<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>getName<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>getTitle<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    directLeader <span class="token operator">=</span> Supervisor<span class="token punctuation">(</span><span class="token string">"Eren"</span><span class="token punctuation">,</span> <span class="token string">"客户端研发部经理"</span><span class="token punctuation">)</span>
    departmentLeader <span class="token operator">=</span> DepartmentManager<span class="token punctuation">(</span><span class="token string">"Eric"</span><span class="token punctuation">,</span> <span class="token string">"技术研发中心总监"</span><span class="token punctuation">)</span>
    ceo <span class="token operator">=</span> CEO<span class="token punctuation">(</span><span class="token string">"Helen"</span><span class="token punctuation">,</span> <span class="token string">"创新文化公司CEO"</span><span class="token punctuation">)</span>
    administrator <span class="token operator">=</span> Administrator<span class="token punctuation">(</span><span class="token string">"Nina"</span><span class="token punctuation">,</span> <span class="token string">"行政中心总监"</span><span class="token punctuation">)</span>
    directLeader<span class="token punctuation">.</span>setNextHandle<span class="token punctuation">(</span>departmentLeader<span class="token punctuation">)</span>
    departmentLeader<span class="token punctuation">.</span>setNextHandle<span class="token punctuation">(</span>ceo<span class="token punctuation">)</span>
    ceo<span class="token punctuation">.</span>setNextHandle<span class="token punctuation">(</span>administrator<span class="token punctuation">)</span>

    sunny <span class="token operator">=</span> Person<span class="token punctuation">(</span><span class="token string">"sunny"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"参加MDCC大会"</span><span class="token punctuation">)</span>
    sunny<span class="token punctuation">.</span>setLeader<span class="token punctuation">(</span>directLeader<span class="token punctuation">)</span>
    sunny<span class="token punctuation">.</span>request<span class="token punctuation">(</span><span class="token punctuation">)</span>

    tony <span class="token operator">=</span> Person<span class="token punctuation">(</span><span class="token string">"tony"</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">"家里有紧急事情！"</span><span class="token punctuation">)</span>
    tony<span class="token punctuation">.</span>setLeader<span class="token punctuation">(</span>directLeader<span class="token punctuation">)</span>
    tony<span class="token punctuation">.</span>request<span class="token punctuation">(</span><span class="token punctuation">)</span>

    pony <span class="token operator">=</span> Person<span class="token punctuation">(</span><span class="token string">"Pony"</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token string">"出国深造。"</span><span class="token punctuation">)</span>
    pony<span class="token punctuation">.</span>setLeader<span class="token punctuation">(</span>directLeader<span class="token punctuation">)</span>
    pony<span class="token punctuation">.</span>request<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
</li>
<li><p>主要代码，链上的各个节点都设置好下一级的处理对象，各节点上的对象只有处理的条件符合时才处理。</p>
<pre class=" language-python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Manager</span><span class="token punctuation">(</span>metaclass<span class="token operator">=</span>ABCMeta<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> title<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>_nextHandler <span class="token operator">=</span> None
        
    <span class="token keyword">def</span> <span class="token function">setNextHandle</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nextHandler<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>_nextHandler <span class="token operator">=</span> nextHandler

    @abstractmethod
    <span class="token keyword">def</span> <span class="token function">handleRequest</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> person<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">pass</span>
        
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>_nextHandler <span class="token keyword">is</span> <span class="token operator">not</span> None<span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>_nextHandler<span class="token punctuation">.</span>handleRequest<span class="token punctuation">(</span>person<span class="token punctuation">)</span>
</code></pre>
</li>
</ul>
<h2 id="8-代理模式"><a href="#8-代理模式" class="headerlink" title="8. 代理模式"></a>8. 代理模式</h2><ul>
<li><p>代理模式，间接执行真正的主体，协调双方也方便控制</p>
<pre class=" language-python"><code class="language-python"><span class="token keyword">from</span> abc <span class="token keyword">import</span> ABCMeta<span class="token punctuation">,</span> abstractmethod


<span class="token keyword">class</span> <span class="token class-name">ReceiveParcel</span><span class="token punctuation">(</span>metaclass<span class="token operator">=</span>ABCMeta<span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>__name <span class="token operator">=</span> name

    <span class="token keyword">def</span> <span class="token function">getName</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>__name

    @abstractmethod
    <span class="token keyword">def</span> <span class="token function">receive</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> parcelContent<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">pass</span>


<span class="token keyword">class</span> <span class="token class-name">TonyReception</span><span class="token punctuation">(</span>ReceiveParcel<span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> phoneNum<span class="token punctuation">)</span><span class="token punctuation">:</span>
        super<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>name<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>__phoneNum <span class="token operator">=</span> phoneNum

    <span class="token keyword">def</span> <span class="token function">getPhoneNum</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>__phoneNum

    <span class="token keyword">def</span> <span class="token function">receive</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> parcelContent<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"货物主人： %s ,手机号： %s "</span> <span class="token operator">%</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>getName<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>getPhoneNum<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"接收到一个包裹，包裹内容： %s "</span> <span class="token operator">%</span> parcelContent<span class="token punctuation">)</span>


<span class="token keyword">class</span> <span class="token class-name">WendyReception</span><span class="token punctuation">(</span>ReceiveParcel<span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> receiver<span class="token punctuation">)</span><span class="token punctuation">:</span>
        super<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>name<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>__receiver <span class="token operator">=</span> receiver

    <span class="token keyword">def</span> <span class="token function">receive</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> parcelContent<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"我是%s的朋友，我来帮他收快递！"</span> <span class="token operator">%</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>__receiver<span class="token punctuation">.</span>getName<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" "</span> <span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>__receiver <span class="token keyword">is</span> <span class="token operator">not</span> None<span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>__receiver<span class="token punctuation">.</span>receive<span class="token punctuation">(</span>parcelContent<span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    tony <span class="token operator">=</span> TonyReception<span class="token punctuation">(</span><span class="token string">"Tony"</span><span class="token punctuation">,</span> <span class="token string">"18888888888"</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Tony接受："</span><span class="token punctuation">)</span>
    tony<span class="token punctuation">.</span>receive<span class="token punctuation">(</span><span class="token string">"雪地靴"</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Wendy代收："</span><span class="token punctuation">)</span>
    wendy <span class="token operator">=</span> WendyReception<span class="token punctuation">(</span><span class="token string">"Wendy"</span><span class="token punctuation">,</span> tony<span class="token punctuation">)</span>
    wendy<span class="token punctuation">.</span>receive<span class="token punctuation">(</span><span class="token string">"雪地靴"</span><span class="token punctuation">)</span>
</code></pre>
</li>
<li><p>主要代码，代理类传入需要代理的对象，在执行代理对象的方法之前可以进行控制处理。</p>
<pre class=" language-python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">WendyReception</span><span class="token punctuation">(</span>ReceiveParcel<span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> receiver<span class="token punctuation">)</span><span class="token punctuation">:</span>
        super<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>name<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>__receiver <span class="token operator">=</span> receiver

    <span class="token keyword">def</span> <span class="token function">receive</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> parcelContent<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"我是%s的朋友，我来帮他收快递！"</span> <span class="token operator">%</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>__receiver<span class="token punctuation">.</span>getName<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" "</span> <span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>__receiver <span class="token keyword">is</span> <span class="token operator">not</span> None<span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>__receiver<span class="token punctuation">.</span>receive<span class="token punctuation">(</span>parcelContent<span class="token punctuation">)</span>
</code></pre>
</li>
</ul>
<h2 id="9-外观模式"><a href="#9-外观模式" class="headerlink" title="9. 外观模式"></a>9. 外观模式</h2><ul>
<li><p>外观模式，也叫门户模式，将多个复杂的接口封装成一个，以供用户使用。</p>
<pre class=" language-python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Register</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">register</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"活动中心： %s 同学报道成功！"</span> <span class="token operator">%</span> name<span class="token punctuation">)</span>


<span class="token keyword">class</span> <span class="token class-name">Payment</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">pay</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> money<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"缴费中心：收到%s同学%s元付款，缴费成功！"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>name<span class="token punctuation">,</span> money<span class="token punctuation">)</span><span class="token punctuation">)</span>


<span class="token keyword">class</span> <span class="token class-name">DormitoryManagementCenter</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">provideLivingGoods</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"生活中心：%s 同学的生活用品已发放。"</span> <span class="token operator">%</span> name<span class="token punctuation">)</span>


<span class="token keyword">class</span> <span class="token class-name">Dormitory</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">meetRoommate</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"宿舍： 大家好！这是刚来的 %s同学，是你们未来需要共读四年的室友！相互认识一下...."</span> <span class="token operator">%</span> name<span class="token punctuation">)</span>


<span class="token keyword">class</span> <span class="token class-name">Volunteer</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>__name <span class="token operator">=</span> name
        self<span class="token punctuation">.</span>__register <span class="token operator">=</span> Register<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>__payment <span class="token operator">=</span> Payment<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>__lifeCenter <span class="token operator">=</span> DormitoryManagementCenter<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>__dormintory <span class="token operator">=</span> Dormitory<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">welcomeFreshmen</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"您好，%s同学！ 我是新生报到的志愿者%s,我将带你完成整个报道流程。"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>name<span class="token punctuation">,</span> self<span class="token punctuation">.</span>__name<span class="token punctuation">)</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>__register<span class="token punctuation">.</span>register<span class="token punctuation">(</span>name<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>__payment<span class="token punctuation">.</span>pay<span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>__lifeCenter<span class="token punctuation">.</span>provideLivingGoods<span class="token punctuation">(</span>name<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>__dormintory<span class="token punctuation">.</span>meetRoommate<span class="token punctuation">(</span>name<span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    volunteer <span class="token operator">=</span> Volunteer<span class="token punctuation">(</span><span class="token string">"Frank"</span><span class="token punctuation">)</span>
    volunteer<span class="token punctuation">.</span>welcomeFreshmen<span class="token punctuation">(</span><span class="token string">"tony"</span><span class="token punctuation">)</span>
</code></pre>
</li>
<li><p>主要代码，外观模式很像中介模式，将本来一对多的关系转换为一对一，由外观类去处理多，区别在于外观模式注重提供统一的对外接口，中介模式注重于双方的交互。</p>
<pre class=" language-python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Volunteer</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>__name <span class="token operator">=</span> name
        self<span class="token punctuation">.</span>__register <span class="token operator">=</span> Register<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>__payment <span class="token operator">=</span> Payment<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>__lifeCenter <span class="token operator">=</span> DormitoryManagementCenter<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>__dormintory <span class="token operator">=</span> Dormitory<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
</li>
</ul>
<h2 id="10-迭代模式"><a href="#10-迭代模式" class="headerlink" title="10 迭代模式"></a>10 迭代模式</h2><ul>
<li><p>迭代模式，提供一种对象的顺序访问方式，Python对迭代支持的非常好（for …. in）</p>
<pre class=" language-python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Customer</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>__name <span class="token operator">=</span> name
        self<span class="token punctuation">.</span>__num <span class="token operator">=</span> <span class="token number">0</span>
        self<span class="token punctuation">.</span>__clinics <span class="token operator">=</span> None

    <span class="token keyword">def</span> <span class="token function">getName</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>__name

    <span class="token keyword">def</span> <span class="token function">register</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> system<span class="token punctuation">)</span><span class="token punctuation">:</span>
        system<span class="token punctuation">.</span>pushCustomer<span class="token punctuation">(</span>self<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">setNum</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> num<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>__num <span class="token operator">=</span> num

    <span class="token keyword">def</span> <span class="token function">getNum</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>__num

    <span class="token keyword">def</span> <span class="token function">setClinic</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> clinic<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>__clinics <span class="token operator">=</span> clinic

    <span class="token keyword">def</span> <span class="token function">getClinic</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>__clinics


<span class="token keyword">class</span> <span class="token class-name">NumeralIterator</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>__data <span class="token operator">=</span> data
        self<span class="token punctuation">.</span>__curIdx <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span>

    <span class="token keyword">def</span> <span class="token function">next</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>__curIdx <span class="token operator">&lt;</span> len<span class="token punctuation">(</span>self<span class="token punctuation">.</span>__data<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>__curIdx <span class="token operator">+=</span> <span class="token number">1</span>
            <span class="token keyword">return</span> <span class="token boolean">True</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token boolean">False</span>

    <span class="token keyword">def</span> <span class="token function">current</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>__data<span class="token punctuation">[</span>self<span class="token punctuation">.</span>__curIdx<span class="token punctuation">]</span> <span class="token keyword">if</span> self<span class="token punctuation">.</span>__curIdx <span class="token operator">&lt;</span> len<span class="token punctuation">(</span>self<span class="token punctuation">.</span>__data<span class="token punctuation">)</span> <span class="token operator">and</span> self<span class="token punctuation">.</span>__curIdx <span class="token operator">>=</span> <span class="token number">0</span> <span class="token keyword">else</span> None


<span class="token keyword">class</span> <span class="token class-name">NumberalSystem</span><span class="token punctuation">:</span>
    __clinics <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">"1号诊室"</span><span class="token punctuation">,</span> <span class="token string">"2号正式诊室"</span><span class="token punctuation">,</span> <span class="token string">"3号正式诊室"</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>__customers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        self<span class="token punctuation">.</span>__curNum <span class="token operator">=</span> <span class="token number">0</span>
        self<span class="token punctuation">.</span>__name <span class="token operator">=</span> name

    <span class="token keyword">def</span> <span class="token function">pushCustomer</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> customer<span class="token punctuation">)</span><span class="token punctuation">:</span>
        customer<span class="token punctuation">.</span>setNum<span class="token punctuation">(</span>self<span class="token punctuation">.</span>__curNum <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
        click <span class="token operator">=</span> NumberalSystem<span class="token punctuation">.</span>__clinics<span class="token punctuation">[</span>self<span class="token punctuation">.</span>__curNum <span class="token operator">%</span> len<span class="token punctuation">(</span>NumberalSystem<span class="token punctuation">.</span>__clinics<span class="token punctuation">)</span><span class="token punctuation">]</span>
        customer<span class="token punctuation">.</span>setClinic<span class="token punctuation">(</span>click<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>__curNum <span class="token operator">+=</span> <span class="token number">1</span>
        self<span class="token punctuation">.</span>__customers<span class="token punctuation">.</span>append<span class="token punctuation">(</span>customer<span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"%s 您好！ 您已在 %s 成功挂号，序号：%04d，请耐心等待！"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>customer<span class="token punctuation">.</span>getName<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>__name<span class="token punctuation">,</span> customer<span class="token punctuation">.</span>getNum<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">getIterator</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> NumeralIterator<span class="token punctuation">(</span>self<span class="token punctuation">.</span>__customers<span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    numeralSystem <span class="token operator">=</span> Nclass Volunteer<span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>__name <span class="token operator">=</span> name
        self<span class="token punctuation">.</span>__register <span class="token operator">=</span> Register<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>__payment <span class="token operator">=</span> Payment<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>__lifeCenter <span class="token operator">=</span> DormitoryManagementCenter<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>__dormintory <span class="token operator">=</span> Dormitory<span class="token punctuation">(</span><span class="token punctuation">)</span>umberalSystem<span class="token punctuation">(</span><span class="token string">"挂号台"</span><span class="token punctuation">)</span>
    lily <span class="token operator">=</span> Customer<span class="token punctuation">(</span><span class="token string">"Lily"</span><span class="token punctuation">)</span>
    lily<span class="token punctuation">.</span>register<span class="token punctuation">(</span>numeralSystem<span class="token punctuation">)</span>
    pony <span class="token operator">=</span> Customer<span class="token punctuation">(</span><span class="token string">"Pony"</span><span class="token punctuation">)</span>
    pony<span class="token punctuation">.</span>register<span class="token punctuation">(</span>numeralSystem<span class="token punctuation">)</span>
    nick <span class="token operator">=</span> Customer<span class="token punctuation">(</span><span class="token string">"Nick"</span><span class="token punctuation">)</span>
    nick<span class="token punctuation">.</span>register<span class="token punctuation">(</span>numeralSystem<span class="token punctuation">)</span>
    tony <span class="token operator">=</span> Customer<span class="token punctuation">(</span><span class="token string">"Tony"</span><span class="token punctuation">)</span>
    tony<span class="token punctuation">.</span>register<span class="token punctuation">(</span>numeralSystem<span class="token punctuation">)</span><span class="token keyword">class</span> <span class="token class-name">WendyReception</span><span class="token punctuation">(</span>ReceiveParcel<span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> receiver<span class="token punctuation">)</span><span class="token punctuation">:</span>
        super<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>name<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>__receiver <span class="token operator">=</span> receiver

    <span class="token keyword">def</span> <span class="token function">receive</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> parcelContent<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"我是%s的朋友，我来帮他收快递！"</span> <span class="token operator">%</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>__receiver<span class="token punctuation">.</span>getName<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" "</span> <span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>__receiver <span class="token keyword">is</span> <span class="token operator">not</span> None<span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>__receiver<span class="token punctuation">.</span>receive<span class="token punctuation">(</span>parcelContent<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    iterator <span class="token operator">=</span> numeralSystem<span class="token punctuation">.</span>getIterator<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span>iterator<span class="token punctuation">.</span>next<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        customer <span class="token operator">=</span> iterator<span class="token punctuation">.</span>current<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"下一位病人 %04d(%s) 请到 %s 就诊。"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>customer<span class="token punctuation">.</span>getNum<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> customer<span class="token punctuation">.</span>getName<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> customer<span class="token punctuation">.</span>getClinic<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
</li>
<li><p>主要代码，没什么好说的，在其他语言里面这是一种数据、对象的遍历方式，在python里面也是，只不过python内置很多迭代器。</p>
<pre class=" language-python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">NumeralIterator</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>__data <span class="token operator">=</span> data
        self<span class="token punctuation">.</span>__curIdx <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span>

    <span class="token keyword">def</span> <span class="token function">next</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>__curIdx <span class="token operator">&lt;</span> len<span class="token punctuation">(</span>self<span class="token punctuation">.</span>__data<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>__curIdx <span class="token operator">+=</span> <span class="token number">1</span>
            <span class="token keyword">return</span> <span class="token boolean">True</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token boolean">False</span>

    <span class="token keyword">def</span> <span class="token function">current</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>__data<span class="token punctuation">[</span>self<span class="token punctuation">.</span>__curIdx<span class="token punctuation">]</span> <span class="token keyword">if</span> self<span class="token punctuation">.</span>__curIdx <span class="token operator">&lt;</span> len<span class="token punctuation">(</span>self<span class="token punctuation">.</span>__data<span class="token punctuation">)</span> <span class="token operator">and</span> self<span class="token punctuation">.</span>__curIdx <span class="token operator">>=</span> <span class="token number">0</span> <span class="token keyword">else</span> None
</code></pre>
</li>
</ul>
<h2 id="11-组合模式"><a href="#11-组合模式" class="headerlink" title="11 组合模式"></a>11 组合模式</h2><ul>
<li><p>组合模式，复杂的功能可以分解成多个组件，组件之间相互组合构成更多功能。</p>
<pre class=" language-python"><code class="language-python"><span class="token keyword">from</span> abc <span class="token keyword">import</span> ABCMeta<span class="token punctuation">,</span> abstractmethod


<span class="token keyword">class</span> <span class="token class-name">ComputerComponent</span><span class="token punctuation">(</span>metaclass<span class="token operator">=</span>ABCMeta<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>_name <span class="token operator">=</span> name

    @abstractmethod
    <span class="token keyword">def</span> <span class="token function">showInfo</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">pass</span>

    <span class="token keyword">def</span> <span class="token function">isComposite</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token boolean">False</span>

    <span class="token keyword">def</span> <span class="token function">startup</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"%s%s 准备开始工作..."</span> <span class="token operator">%</span> <span class="token punctuation">(</span>indent<span class="token punctuation">,</span> self<span class="token punctuation">.</span>_name<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">shutdown</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"%s%s 即将结束工作..."</span> <span class="token operator">%</span> <span class="token punctuation">(</span>indent<span class="token punctuation">,</span> self<span class="token punctuation">.</span>_name<span class="token punctuation">)</span><span class="token punctuation">)</span>


<span class="token keyword">class</span> <span class="token class-name">CPU</span><span class="token punctuation">(</span>ComputerComponent<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">:</span>
        super<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>name<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">showInfo</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> indent<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"%sCPU:%s,可以进行告诉运算。 "</span> <span class="token operator">%</span> <span class="token punctuation">(</span>indent<span class="token punctuation">,</span> self<span class="token punctuation">.</span>_name<span class="token punctuation">)</span><span class="token punctuation">)</span>


<span class="token keyword">class</span> <span class="token class-name">MemoryCard</span><span class="token punctuation">(</span>ComputerComponent<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">:</span>
        super<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>name<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">showInfo</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> indent<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"%s内存:%s,可以缓存数据，读写更快。 "</span> <span class="token operator">%</span> <span class="token punctuation">(</span>indent<span class="token punctuation">,</span> self<span class="token punctuation">.</span>_name<span class="token punctuation">)</span><span class="token punctuation">)</span>


<span class="token keyword">class</span> <span class="token class-name">HardDisk</span><span class="token punctuation">(</span>ComputerComponent<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">:</span>
        super<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>name<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">showInfo</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> indent<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"%s硬盘:%s,可以永久存储数据，容量大。 "</span> <span class="token operator">%</span> <span class="token punctuation">(</span>indent<span class="token punctuation">,</span> self<span class="token punctuation">.</span>_name<span class="token punctuation">)</span><span class="token punctuation">)</span>


<span class="token keyword">class</span> <span class="token class-name">GraphicsCard</span><span class="token punctuation">(</span>ComputerComponent<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">:</span>
        super<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>name<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">showInfo</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> indent<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"%s显卡:%s,可以高速计算和处理图形图像。 "</span> <span class="token operator">%</span> <span class="token punctuation">(</span>indent<span class="token punctuation">,</span> self<span class="token punctuation">.</span>_name<span class="token punctuation">)</span><span class="token punctuation">)</span>


<span class="token keyword">class</span> <span class="token class-name">Battery</span><span class="token punctuation">(</span>ComputerComponent<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">:</span>
        super<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>name<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">showInfo</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> indent<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"%s电源:%s,可以持续给主板和外界配件供电。 "</span> <span class="token operator">%</span> <span class="token punctuation">(</span>indent<span class="token punctuation">,</span> self<span class="token punctuation">.</span>_name<span class="token punctuation">)</span><span class="token punctuation">)</span>


<span class="token keyword">class</span> <span class="token class-name">Fan</span><span class="token punctuation">(</span>ComputerComponent<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">:</span>
        super<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>name<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">showInfo</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> indent<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"%s风扇:%s,可以持续给主板和外界配件供电。 "</span> <span class="token operator">%</span> <span class="token punctuation">(</span>indent<span class="token punctuation">,</span> self<span class="token punctuation">.</span>_name<span class="token punctuation">)</span><span class="token punctuation">)</span>


<span class="token keyword">class</span> <span class="token class-name">Displayer</span><span class="token punctuation">(</span>ComputerComponent<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">:</span>
        super<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>name<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">showInfo</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> indent<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"%s显示器:%s,可以显示界面和打游戏。 "</span> <span class="token operator">%</span> <span class="token punctuation">(</span>indent<span class="token punctuation">,</span> self<span class="token punctuation">.</span>_name<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">class</span> <span class="token class-name">ComputerComposite</span><span class="token punctuation">(</span>ComputerComponent<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">:</span>
        super<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>name<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>_components <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

    <span class="token keyword">def</span> <span class="token function">showInfo</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> indent<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"%s,由一下部件组成："</span> <span class="token operator">%</span> self<span class="token punctuation">.</span>_name<span class="token punctuation">)</span>
        indent <span class="token operator">+=</span> <span class="token string">'\t'</span>
        <span class="token keyword">for</span> element <span class="token keyword">in</span> self<span class="token punctuation">.</span>_components<span class="token punctuation">:</span>
            element<span class="token punctuation">.</span>showInfo<span class="token punctuation">(</span>indent<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">isComposite</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token boolean">True</span>

    <span class="token keyword">def</span> <span class="token function">addComposite</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> component<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>_components<span class="token punctuation">.</span>append<span class="token punctuation">(</span>component<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">removeComponent</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> component<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>_components<span class="token punctuation">.</span>remove<span class="token punctuation">(</span>component<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">startup</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> indent<span class="token punctuation">)</span><span class="token punctuation">:</span>
        super<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>startup<span class="token punctuation">(</span>indent<span class="token punctuation">)</span>
        indent <span class="token operator">+=</span> <span class="token string">'\t'</span>
        <span class="token keyword">for</span> element <span class="token keyword">in</span> self<span class="token punctuation">.</span>_components<span class="token punctuation">:</span>
            element<span class="token punctuation">.</span>startup<span class="token punctuation">(</span>indent<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">shutdown</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> indent<span class="token punctuation">)</span><span class="token punctuation">:</span>
        super<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>shutdown<span class="token punctuation">(</span>indent<span class="token punctuation">)</span>
        indent <span class="token operator">+=</span> <span class="token string">'\t'</span>
        <span class="token keyword">for</span> element <span class="token keyword">in</span> self<span class="token punctuation">.</span>_components<span class="token punctuation">:</span>
            element<span class="token punctuation">.</span>shutdown<span class="token punctuation">(</span>indent<span class="token punctuation">)</span>


<span class="token keyword">class</span> <span class="token class-name">MainBoard</span><span class="token punctuation">(</span>ComputerComposite<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">:</span>
        super<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>name<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">showInfo</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> indent<span class="token punctuation">)</span><span class="token punctuation">:</span>组合模式
        <span class="token keyword">print</span><span class="token punctuation">(</span>indent <span class="token operator">+</span> <span class="token string">"主板："</span><span class="token punctuation">,</span> end<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">)</span>
        super<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>showInfo<span class="token punctuation">(</span>indent<span class="token punctuation">)</span>


<span class="token keyword">class</span> <span class="token class-name">ComputerCase</span><span class="token punctuation">(</span>ComputerComposite<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">:</span>
        super<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>name<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">showInfo</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> indent<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>indent <span class="token operator">+</span> <span class="token string">"机箱:"</span><span class="token punctuation">,</span> end<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">)</span>
        super<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>showInfo<span class="token punctuation">(</span>indent<span class="token punctuation">)</span>


<span class="token keyword">class</span> <span class="token class-name">Computer</span><span class="token punctuation">(</span>ComputerComposite<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">:</span>
        super<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>name<span class="token punctuation">)</span>组合模式

    <span class="token keyword">def</span> <span class="token function">showInfo</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> indent<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>indent<span class="token punctuation">,</span> <span class="token string">"电脑："</span><span class="token punctuation">,</span> end<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">)</span>
        super<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>showInfo<span class="token punctuation">(</span>indent<span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    mainBoard <span class="token operator">=</span> MainBoard<span class="token punctuation">(</span><span class="token string">"GIGABYTE Z179M M-ATX"</span><span class="token punctuation">)</span>
    mainBoard<span class="token punctuation">.</span>addComposite<span class="token punctuation">(</span>CPU<span class="token punctuation">(</span><span class="token string">"Intel Core I5-5500k"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    mainBoard<span class="token punctuation">.</span>addComposite<span class="token punctuation">(</span>MemoryCard<span class="token punctuation">(</span><span class="token string">"Kingston Fury DDR4"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    mainBoard<span class="token punctuation">.</span>addComposite<span class="token punctuation">(</span>HardDisk<span class="token punctuation">(</span><span class="token string">"Kingston V300"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    mainBoard<span class="token punctuation">.</span>addComposite<span class="token punctuation">(</span>GraphicsCard<span class="token punctuation">(</span><span class="token string">"Colorful iGame750"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    computerCase <span class="token operator">=</span> ComputerCase<span class="token punctuation">(</span><span class="token string">"SAMA MATX"</span><span class="token punctuation">)</span>
    computerCase<span class="token punctuation">.</span>addComposite<span class="token punctuation">(</span>mainBoard<span class="token punctuation">)</span>
    computerCase<span class="token punctuation">.</span>addComposite<span class="token punctuation">(</span>Battery<span class="token punctuation">(</span><span class="token string">"Anter VP 450P"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    computerCase<span class="token punctuation">.</span>addComposite<span class="token punctuation">(</span>Fan<span class="token punctuation">(</span><span class="token string">"DEEPCOOL 120T"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    computer <span class="token operator">=</span> Computer<span class="token punctuation">(</span><span class="token string">"Tony DIV 电脑"</span><span class="token punctuation">)</span>
    computer<span class="token punctuation">.</span>addComposite<span class="token punctuation">(</span>computerCase<span class="token punctuation">)</span>
    computer<span class="token punctuation">.</span>addComposite<span class="token punctuation">(</span>Displayer<span class="token punctuation">(</span><span class="token string">"AOC Lv24XIP"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    computer<span class="token punctuation">.</span>showInfo<span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"\n 开机过程"</span><span class="token punctuation">)</span>
    computer<span class="token punctuation">.</span>startup<span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"\n 关机过程"</span><span class="token punctuation">)</span>
    computer<span class="token punctuation">.</span>shutdown<span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span>
</code></pre>
</li>
<li><p>主要代码 ，组合模式注重于将多个零件相互组合成一个复杂的系统。</p>
<pre class=" language-python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">ComputerComposite</span><span class="token punctuation">(</span>ComputerComponent<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">:</span>
        super<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>name<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>_components <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

    <span class="token keyword">def</span> <span class="token function">showInfo</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> indent<span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token keyword">def</span> <span class="token function">addComposite</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> component<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>_components<span class="token punctuation">.</span>append<span class="token punctuation">(</span>component<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">removeComponent</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> component<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>_components<span class="token punctuation">.</span>remove<span class="token punctuation">(</span>component<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">startup</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> indent<span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token keyword">def</span> <span class="token function">shutdown</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> indent<span class="token punctuation">)</span><span class="token punctuation">:</span>
</code></pre>
</li>
</ul>
</div><script src="/js/jquery.min.js"></script><script src="/js/main.js"></script></body></html>